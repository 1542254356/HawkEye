<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
修改新闻
<hr>
<form action="../UpdateNewsServlet" method="post">
<table border="1" align="center">
<tr>
<td>新闻题目：</td>
<td><input type="text" name="title" value=<%=request.getParameter("title") %>></td>
</tr>
<tr>
<td>新闻内容：</td>
<td><textarea rows="15" cols="50" name="content" ><%=request.getParameter("content") %></textarea></td>
</tr>
<tr>
<td>发布人：</td>
<td><input type="text" name="username" value=<%=request.getParameter("username") %> disabled="disabled"></td>
</tr>

<input type="hidden" name="newsid" value="<%=request.getParameter("newsid") %>">

<tr>
<td colspan="2"><input type="submit" value="保存" onclik="check()">
<input type="reset" value="重置">
<input type="button" value="返回" onclick="back()">
</td>
</tr>
</table>
</form>
<script type="text/javascript" src="/js/jquery.1.12.4.min.js"></script>
<script type="text/javascript" charset="utf-8">
function back(){
	 window.history.go(-1);
	 location.reload();
 }
function getQueryVariable(variable)
{
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if(pair[0] == variable){return pair[1];}
    }
    return(false);
}

var news = {
    "content": "",
    "id": 0,
    "pubTime": "2018-1-1",
    "title": "",
    "userId": 0
}




$(function () {



    news.content = getQueryVariable("content")
    news.title = getQueryVariable("title")
    news.userId = getQueryVariable("userId")

    console.log(news)
})


function f() {
    $.ajax({
        type: "PUT",
        url: "/news/" + user.id,
        contentType: "application/json",
        data : JSON.stringify(user),
        success:function(data) {
            if (data.state == 0) {
                top.location.replace( "/html/index.html")
            } else {
                alert(data.message)
            }
        }
    });
}




</script>
</body>
</html>
